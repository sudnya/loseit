<!doctype html>
<html>
<head>
    <title>Food Journal</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.css" rel="stylesheet">
    <!-- If IE use the latest rendering engine -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Set the page to the width of the device and set the zoon level -->
    <meta name="viewport" content="width = device-width, initial-scale = 1">
    <!--  jQuery -->
    <!--<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script> -->
    <!-- Bootstrap Date-Picker Plugin     -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" href="/stylesheets/rangeslider.css">
    <link rel="stylesheet" href="/stylesheets/bootstrap-datepicker3.css"/>
    <script type="text/javascript" src="/javascripts/bootstrap-datepicker.min.js"></script>
</head>
<body>

<div class="container-fluid">

    <div class="page-header text-center">
        <h1><span class="fa fa-anchor"></span> Food Journal Home </h1>
        <a href="/logout" class="btn btn-primary btn-sm">Logout</a>
        <a href="/review" class="btn btn-primary btn-sm">Review</a>
    </div>

    <div class="row">

        <!-- LOCAL INFORMATION -->
        <div class="col-sm-6">
            <div class="well">

                <% if (user.local.username) { %>
                    <p> <strong>Welcome <%= user.local.username %> ! </strong><br> </p>
                    
                    
                    <!-- Form code begins -->
                    <form action="/meals" method="POST">
                          <div class="form-group"> <!-- Date input -->
                                <label class="control-label" for="date">Date</label>
                                <input class="form-control" id="date" name="date" placeholder="MM/DD/YYY" type="text"/><br><br><br><br>
                                
                                <input type='hidden' name='username' value=<%= user.local.username %>> 
                                    
                                    <label for ="food">Meal description</label>
                                    <textarea class = "form-control" rows = "4" name="item"></textarea>
                                <br><br>How hungry were you right before this meal?<br>
                                <div class="range-slider">
                                  <input class="range-slider__range" type="range" id="hungerLevel" name="hungerLevel" value="3" min="1" max="5">
                                  <span class="range-slider__value">0</span>
                                </div>
                                <br>How satisfied were you after this meal?<br>
                                <div class="range-slider">
                                  <input class="range-slider__range" type="range" id="satietyLevel" name="satietyLevel" value="3" min="1" max="5">
                                  <span class="range-slider__value">0</span>
                                </div>

                            </div>
                          <div class="form-group"> <!-- Submit button -->
                            <button class="btn btn-primary " name="submit" type="submit">Submit</button>
                          </div>
    
                    </form>
                    <!-- Form code ends --> 
                    
                    <script>
                        $(document).ready(function(){
                          var date_input=$('input[name="date"]'); //our date input has the name "date"
                          var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
                          var options={
                            format: 'mm/dd/yyyy',
                            container: container,
                            todayHighlight: true,
                            autoclose: true,
                          };
                          date_input.datepicker(options);
                        })
                    </script>

                    <script>
                        var rangeSlider = function(){
                          var slider = $('.range-slider'),
                              range = $('.range-slider__range'),
                              value = $('.range-slider__value');
                            
                          slider.each(function(){

                            value.each(function(){
                              var value = $(this).prev().attr('value');
                              $(this).html(value);
                            });

                            range.on('input', function(){
                              $(this).next(value).html(this.value);
                            });
                          });
                        };

                        rangeSlider();
                    </script>
                <% } %>

            </div>
        </div>
        

    <div class="text-center">
    </div>

</div>
</body>
</html>
